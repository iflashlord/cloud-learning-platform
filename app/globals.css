@tailwind base;
@tailwind components;
@tailwind utilities;

html,
body,
:root {
  @apply h-full;
  scroll-behavior: smooth;
  overscroll-behavior: auto;
  /* Improved font rendering */
  -webkit-font-smoothing: antialiased;
  -moz-osx-font-smoothing: grayscale;
  text-rendering: optimizeLegibility;
}

html {
  /* Light mode overscroll background - subtle and accessible */
  background: linear-gradient(135deg, #f8fafc 0%, #e2e8f0 25%, #f1f5f9 50%, #f8fafc 100%);
}

html.dark {
  /* Dark mode overscroll background - deeper contrast for better visibility */
  background: linear-gradient(135deg, #0f172a 0%, #1e293b 25%, #334155 50%, #1e293b 75%, #0f172a 100%);
}
 
@layer base {
  :root {
    --background: 0 0% 100%;
    --foreground: 0 0% 9%;

    --card: 0 0% 100%;
    --card-foreground: 0 0% 9%;
 
    --popover: 0 0% 100%;
    --popover-foreground: 0 0% 9%;
 
    --primary: 94 98% 40%;
    --primary-foreground: 0 0% 100%;
 
    --secondary: 214 95% 93%;
    --secondary-foreground: 224 64% 33%;
 
    --muted: 0 0% 96%;
    --muted-foreground: 0 0% 45%;
 
    --accent: 214 95% 93%;
    --accent-foreground: 224 64% 33%;
 
    --destructive: 0 84% 60%;
    --destructive-foreground: 0 0% 100%;

    --border: 0 0% 90%;
    --input: 0 0% 90%;
    --ring: 94 98% 40%;
 
    --radius: 0.75rem;
  }
 
  .dark {
    --background: 222.2 84% 4.9%;
    --foreground: 210 40% 98%;
 
    --card: 222.2 84% 4.9%;
    --card-foreground: 210 40% 98%;
 
    --popover: 222.2 84% 4.9%;
    --popover-foreground: 210 40% 98%;
 
    --primary: 210 40% 98%;
    --primary-foreground: 222.2 47.4% 11.2%;
 
    --secondary: 217.2 32.6% 17.5%;
    --secondary-foreground: 210 40% 98%;
 
    --muted: 217.2 32.6% 17.5%;
    --muted-foreground: 215 20.2% 65.1%;
 
    --accent: 217.2 32.6% 17.5%;
    --accent-foreground: 210 40% 98%;
 
    --destructive: 0 62.8% 30.6%;
    --destructive-foreground: 210 40% 98%;
 
    --border: 217.2 32.6% 17.5%;
    --input: 217.2 32.6% 17.5%;
    --ring: 212.7 26.8% 83.9%;
    
    /* Dark mode design system colors */
    /* Dark mode design system colors */
    --ds-neutral-0: 0 0% 0%;
    --ds-neutral-50: 222.2 84% 4.9%;
    --ds-neutral-100: 217.2 32.6% 17.5%;
    --ds-neutral-200: 215 20.2% 25.1%;
    --ds-neutral-300: 213 27% 35%;
    --ds-neutral-400: 215 20.2% 45%;
    --ds-neutral-500: 215 16% 55%;
    --ds-neutral-600: 215 19% 65%;
    --ds-neutral-700: 213 27% 75%;
    --ds-neutral-800: 217.2 32.6% 85.5%;
    --ds-neutral-900: 210 40% 95%;
    --ds-neutral-foreground: 210 40% 98%;
    --ds-neutral-rgb: 115, 115, 115;

    /* Primary palette - Dark mode */
    --ds-primary-50: 222.2 84% 4.9%;
    --ds-primary-100: 217.2 32.6% 17.5%;
    --ds-primary-200: 95 100% 76%;
    --ds-primary-300: 95 100% 83%;
    --ds-primary-400: 98 92% 73%;
    --ds-primary-500: 94 98% 60%;
    --ds-primary-600: 95 99% 52%;
    --ds-primary-700: 96 95% 45%;
    --ds-primary-800: 97 81% 41%;
    --ds-primary-900: 100 69% 38%;
    --ds-primary-foreground: 222.2 47.4% 11.2%;
    --ds-primary-rgb: 88, 204, 2;

    /* Success palette - Dark mode */
    --ds-success-50: 222.2 84% 4.9%;
    --ds-success-100: 217.2 32.6% 17.5%;
    --ds-success-200: 145 93% 32%;
    --ds-success-300: 145 81% 49%;
    --ds-success-400: 145 68% 63%;
    --ds-success-500: 146 78% 61%;
    --ds-success-600: 146 79% 72%;
    --ds-success-700: 146 79% 75%;
    --ds-success-800: 146 75% 79%;
    --ds-success-900: 147 75% 84%;
    --ds-success-foreground: 222.2 47.4% 11.2%;
    --ds-success-rgb: 34, 197, 94;

    /* Error palette - Dark mode */
    --ds-error-50: 222.2 84% 4.9%;
    --ds-error-100: 217.2 32.6% 17.5%;
    --ds-error-200: 0 96% 39%;
    --ds-error-300: 0 94% 52%;
    --ds-error-400: 0 91% 61%;
    --ds-error-500: 0 84% 70%;
    --ds-error-600: 0 72% 71%;
    --ds-error-700: 0 74% 72%;
    --ds-error-800: 0 70% 75%;
    --ds-error-900: 0 63% 81%;
    --ds-error-foreground: 222.2 47.4% 11.2%;
    --ds-error-rgb: 239, 68, 68;

    /* Warning palette - Dark mode */
    --ds-warning-50: 222.2 84% 4.9%;
    --ds-warning-100: 217.2 32.6% 17.5%;
    --ds-warning-200: 53 98% 47%;
    --ds-warning-300: 50 98% 54%;
    --ds-warning-400: 48 96% 63%;
    --ds-warning-500: 45 93% 67%;
    --ds-warning-600: 41 96% 70%;
    --ds-warning-700: 35 92% 73%;
    --ds-warning-800: 32 81% 79%;
    --ds-warning-900: 28 73% 86%;
    --ds-warning-foreground: 28 73% 26%;
    --ds-warning-rgb: 250, 204, 21;

    /* Info palette - Dark mode */
    --ds-info-50: 222.2 84% 4.9%;
    --ds-info-100: 217.2 32.6% 17.5%;
    --ds-info-200: 213 97% 47%;
    --ds-info-300: 212 96% 58%;
    --ds-info-400: 213 94% 68%;
    --ds-info-500: 217 91% 70%;
    --ds-info-600: 221 83% 73%;
    --ds-info-700: 224 76% 78%;
    --ds-info-800: 226 71% 80%;
    --ds-info-900: 224 64% 83%;
    --ds-info-foreground: 222.2 47.4% 11.2%;
    --ds-info-rgb: 59, 130, 246;
  }
}
 
@layer base {
  * {
    @apply border-border;
  }
  body {
    @apply bg-background text-foreground;
  }
  
  /* ========================================
     DESIGN SYSTEM CSS VARIABLES
     ======================================== */
  
  :root {
    /* Spacing scale */
    --ds-space-xs: 0.25rem;
    --ds-space-sm: 0.5rem;
    --ds-space-md: 0.75rem;
    --ds-space-lg: 1rem;
    --ds-space-xl: 1.5rem;
    --ds-space-2xl: 2rem;
    --ds-space-3xl: 3rem;
    --ds-space-4xl: 4rem;

    /* Radius scale */
    --ds-radius-sm: 0.125rem;
    --ds-radius-md: 0.375rem;
    --ds-radius-lg: 0.5rem;
    --ds-radius-xl: 0.75rem;
    --ds-radius-2xl: 1rem;

    /* Typography scale */
    --ds-text-xs: 0.75rem;
    --ds-text-sm: 0.875rem;
    --ds-text-base: 1rem;
    --ds-text-lg: 1.125rem;
    --ds-text-xl: 1.25rem;
    --ds-text-2xl: 1.5rem;
    --ds-text-3xl: 1.875rem;
    --ds-text-4xl: 2.25rem;

    /* Shadows */
    --ds-shadow-sm: 0 8px 16px rgba(15, 23, 42, 0.05);
    --ds-shadow-md: 0 16px 32px rgba(15, 23, 42, 0.08);
    --ds-shadow-lg: 0 20px 48px rgba(15, 23, 42, 0.12);
    --ds-shadow-xl: 0 28px 64px rgba(15, 23, 42, 0.16);

    /* Primary palette */
    --ds-primary-50: 92 100% 95%;
    --ds-primary-100: 94 100% 88%;
    --ds-primary-200: 95 100% 76%;
    --ds-primary-300: 95 100% 63%;
    --ds-primary-400: 98 92% 53%;
    --ds-primary-500: 94 98% 40%;
    --ds-primary-600: 95 99% 32%;
    --ds-primary-700: 96 95% 25%;
    --ds-primary-800: 97 81% 21%;
    --ds-primary-900: 100 69% 18%;
    --ds-primary-foreground: 0 0% 100%;
    --ds-primary-rgb: 88, 204, 2;

    /* Success palette */
    --ds-success-50: 147 100% 96%;
    --ds-success-100: 145 100% 91%;
    --ds-success-200: 145 93% 82%;
    --ds-success-300: 145 81% 69%;
    --ds-success-400: 145 68% 53%;
    --ds-success-500: 146 78% 41%;
    --ds-success-600: 146 79% 32%;
    --ds-success-700: 146 79% 25%;
    --ds-success-800: 146 75% 19%;
    --ds-success-900: 147 75% 14%;
    --ds-success-foreground: 0 0% 100%;
    --ds-success-rgb: 23, 184, 92;

    /* Error palette */
    --ds-error-50: 0 86% 97%;
    --ds-error-100: 0 93% 94%;
    --ds-error-200: 0 96% 89%;
    --ds-error-300: 0 94% 82%;
    --ds-error-400: 0 91% 71%;
    --ds-error-500: 0 84% 60%;
    --ds-error-600: 0 72% 51%;
    --ds-error-700: 0 74% 42%;
    --ds-error-800: 0 70% 35%;
    --ds-error-900: 0 63% 31%;
    --ds-error-foreground: 0 0% 100%;
    --ds-error-rgb: 239, 68, 68;

    /* Warning palette */
    --ds-warning-50: 55 92% 95%;
    --ds-warning-100: 55 97% 88%;
    --ds-warning-200: 53 98% 77%;
    --ds-warning-300: 50 98% 64%;
    --ds-warning-400: 48 96% 53%;
    --ds-warning-500: 45 93% 47%;
    --ds-warning-600: 41 96% 40%;
    --ds-warning-700: 35 92% 33%;
    --ds-warning-800: 32 81% 29%;
    --ds-warning-900: 28 73% 26%;
    --ds-warning-foreground: 28 73% 26%;
    --ds-warning-rgb: 250, 204, 21;

    /* Info palette */
    --ds-info-50: 214 100% 97%;
    --ds-info-100: 214 95% 93%;
    --ds-info-200: 213 97% 87%;
    --ds-info-300: 212 96% 78%;
    --ds-info-400: 213 94% 68%;
    --ds-info-500: 217 91% 60%;
    --ds-info-600: 221 83% 53%;
    --ds-info-700: 224 76% 48%;
    --ds-info-800: 226 71% 40%;
    --ds-info-900: 224 64% 33%;
    --ds-info-foreground: 0 0% 100%;
    --ds-info-rgb: 59, 130, 246;

    /* Neutral palette */
    --ds-neutral-0: 0 0% 100%;
    --ds-neutral-50: 0 0% 98%;
    --ds-neutral-100: 0 0% 96%;
    --ds-neutral-200: 0 0% 90%;
    --ds-neutral-300: 0 0% 83%;
    --ds-neutral-400: 0 0% 64%;
    --ds-neutral-500: 0 0% 45%;
    --ds-neutral-600: 0 0% 32%;
    --ds-neutral-700: 0 0% 25%;
    --ds-neutral-800: 0 0% 15%;
    --ds-neutral-900: 0 0% 9%;
    --ds-neutral-foreground: 0 0% 9%;
    --ds-neutral-rgb: 115, 115, 115;
  }
}

@layer components {
  /* ========================================
     DESIGN SYSTEM COMPONENT STYLES
     ======================================== */
  
  /* Status utility classes */
  .ds-success {
    background-color: hsl(var(--ds-success-50));
    color: hsl(var(--ds-success-700));
    border-color: hsl(var(--ds-success-200));
  }
  
  .ds-error {
    background-color: hsl(var(--ds-error-50));
    color: hsl(var(--ds-error-700));
    border-color: hsl(var(--ds-error-200));
  }
  
  .ds-warning {
    background-color: hsl(var(--ds-warning-50));
    color: hsl(var(--ds-warning-700));
    border-color: hsl(var(--ds-warning-200));
  }
  
  .ds-info {
    background-color: hsl(var(--ds-info-50));
    color: hsl(var(--ds-info-700));
    border-color: hsl(var(--ds-info-200));
  }
  
  .ds-neutral {
    background-color: hsl(var(--ds-neutral-100));
    color: hsl(var(--ds-neutral-700));
    border-color: hsl(var(--ds-neutral-200));
  }
  
  /* Interactive utilities */
  .ds-interactive {
    cursor: pointer;
    transition: transform 0.2s ease-out;
  }

  .ds-interactive:hover {
    transform: translateY(-2px);
  }

  .ds-interactive:active {
    transform: translateY(0);
  }
  
  /* Focus utilities */
  .ds-focus {
    outline: none;
  }

  .ds-focus:focus-visible {
    box-shadow: 0 0 0 2px hsla(var(--ds-primary-500), 0.4);
  }
  
  /* Layout utilities */
  .ds-container {
    max-width: 80rem;
    margin-left: auto;
    margin-right: auto;
    padding-left: var(--ds-space-lg);
    padding-right: var(--ds-space-lg);
  }
  
  .ds-flex-center {
    display: flex;
    align-items: center;
    justify-content: center;
  }
  
  .ds-flex-between {
    display: flex;
    align-items: center;
    justify-content: space-between;
  }
  
  .ds-stack {
    display: flex;
    flex-direction: column;
    gap: var(--ds-space-lg);
  }
  
  .ds-grid-responsive {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(260px, 1fr));
    gap: var(--ds-space-xl);
  }
  
  /* Typography utilities */
  .ds-heading-1 {
    font-size: var(--ds-text-3xl);
    font-weight: 800;
    color: hsl(var(--ds-neutral-900));
    letter-spacing: -0.02em;
  }
  
  .ds-heading-2 {
    font-size: var(--ds-text-2xl);
    font-weight: 700;
    color: hsl(var(--ds-neutral-900));
    letter-spacing: -0.015em;
  }
  
  .ds-heading-3 {
    font-size: var(--ds-text-xl);
    font-weight: 600;
    color: hsl(var(--ds-neutral-900));
  }
  
  .ds-body {
    font-size: var(--ds-text-base);
    color: hsl(var(--ds-neutral-700));
    line-height: 1.6;
  }
  
  .ds-body-small {
    font-size: var(--ds-text-sm);
    color: hsl(var(--ds-neutral-600));
    line-height: 1.5;
  }
  
  .ds-text-muted {
    color: hsl(var(--ds-neutral-500));
  }
}

@layer utilities {
  /* ========================================
     DESIGN SYSTEM UTILITIES
     ======================================== */
  
  /* Consistent color overrides for migration */
  .bg-orange-400,
  .bg-orange-500,
  .bg-orange-600 {
    background-color: hsl(var(--primary)) !important;
  }
  
  .text-orange-400,
  .text-orange-500,
  .text-orange-600 {
    color: hsl(var(--primary)) !important;
  }
  
  .border-orange-300,
  .border-orange-400,
  .border-orange-500 {
    border-color: hsl(var(--primary)) !important;
  }
  
  /* Ensure consistent status colors */
  .bg-rose-500 {
    background-color: hsl(var(--ds-error-500)) !important;
  }
  
  .text-rose-500,
  .text-rose-600 {
    color: hsl(var(--ds-error-600)) !important;
  }
  
  .bg-green-500 {
    background-color: hsl(var(--ds-success-500)) !important;
  }
  
  .text-green-500,
  .text-green-600 {
    color: hsl(var(--ds-success-600)) !important;
  }
  
  .bg-blue-500 {
    background-color: hsl(var(--ds-info-500)) !important;
  }
  
  .text-blue-500,
  .text-blue-600 {
    color: hsl(var(--ds-info-600)) !important;
  }
  
  .bg-yellow-500 {
    background-color: hsl(var(--ds-warning-500)) !important;
  }
  
  .text-yellow-500,
  .text-yellow-600 {
    color: hsl(var(--ds-warning-600)) !important;
  }
  
  /* Responsive utilities */
  .ds-hide-mobile {
    display: none;
  }

  @media (min-width: 768px) {
    .ds-hide-mobile {
      display: block;
    }
  }
  
  .ds-hide-desktop {
    display: block;
  }

  @media (min-width: 768px) {
    .ds-hide-desktop {
      display: none;
    }
  }

  /* ========================================
     DUOLINGO-STYLE BUTTON ANIMATIONS
     ======================================== */
  
  /* Subtle bounce animation for success states */
  @keyframes duolingo-bounce {
    0%, 20%, 50%, 80%, 100% {
      transform: translateY(0);
    }
    40% {
      transform: translateY(-4px);
    }
    60% {
      transform: translateY(-2px);
    }
  }
  
  /* Shake animation for error states */
  @keyframes duolingo-shake {
    0%, 100% { transform: translateX(0); }
    10%, 30%, 50%, 70%, 90% { transform: translateX(-2px); }
    20%, 40%, 60%, 80% { transform: translateX(2px); }
  }
  
  /* Smooth loading dot animation - no blinking */
  @keyframes loading-dot {
    0%, 80%, 100% { 
      transform: scale(0.9);
      opacity: 0.8;
    }
    40% { 
      transform: scale(1.1);
      opacity: 1;
    }
  }
  
  /* Success button animation class */
  .button-success-animate {
    animation: duolingo-bounce 0.6s ease-out;
  }
  
  /* Error button animation class */
  .button-error-animate {
    animation: duolingo-shake 0.5s ease-in-out;
  }
  
  /* Enhanced button press effect */
  .button-duolingo:active {
    transform: translateY(1px) scale(0.98);
    transition: transform 0.1s ease-out;
  }
  
  /* Smooth button hover effect */
  .button-duolingo {
    transition: all 0.15s cubic-bezier(0.4, 0, 0.2, 1);
  }
  
  /* Focus ring with Duolingo styling */
  .button-duolingo:focus-visible {
    outline: none;
    box-shadow: 
      0 0 0 3px rgba(59, 130, 246, 0.5),
      0 4px 0 currentColor;
  }
  
  /* Loading spinner styles */
  .loading-spinner {
    display: flex;
    gap: 3px;
    align-items: center;
    height: 1em;
  }
  
  .loading-dot {
    width: 5px;
    height: 5px;
    border-radius: 50%;
    background-color: currentColor;
    animation: loading-dot 1.2s infinite ease-in-out both;
  }
  
  .loading-dot:nth-child(1) { animation-delay: -0.24s; }
  .loading-dot:nth-child(2) { animation-delay: -0.12s; }
  .loading-dot:nth-child(3) { animation-delay: 0s; }
  
  /* Disabled button state improvements */
  .button-duolingo:disabled {
    transform: none !important;
    box-shadow: 0 2px 0 rgba(0, 0, 0, 0.1) !important;
    opacity: 0.6;
    cursor: not-allowed;
    pointer-events: none;
  }
  
  .dark .button-duolingo:disabled {
    box-shadow: 0 2px 0 rgba(255, 255, 255, 0.1) !important;
  }
  
  .button-duolingo:disabled:hover {
    transform: none !important;
    box-shadow: 0 2px 0 rgba(0, 0, 0, 0.1) !important;
  }
  
  .dark .button-duolingo:disabled:hover {
    box-shadow: 0 2px 0 rgba(255, 255, 255, 0.1) !important;
  }
  
  .button-duolingo:disabled:active {
    transform: none !important;
    box-shadow: 0 2px 0 rgba(0, 0, 0, 0.1) !important;
  }
  
  .dark .button-duolingo:disabled:active {
    box-shadow: 0 2px 0 rgba(255, 255, 255, 0.1) !important;
  }
  
  /* Loading button state */
  .button-loading {
    cursor: wait;
    pointer-events: none;
  }

  /* Enhanced contrast for better visibility */
  .dark {
    /* Enhanced text contrast for dark mode */
    --foreground: 210 40% 98%;
    --muted-foreground: 215 20.2% 75%; /* Increased from 65.1% for better visibility */
    
    /* Enhanced border contrast for dark mode */
    --border: 217.2 32.6% 25%; /* Increased from 17.5% for better visibility */
    --input: 217.2 32.6% 25%;
    
    /* Enhanced card contrast for dark mode */
    --card: 222.2 84% 6%; /* Slightly lighter for better separation */
    --card-foreground: 210 40% 98%;
    
    /* Enhanced muted background for better contrast */
    --muted: 217.2 32.6% 20%; /* Slightly lighter for better visibility */
  }
}

/* ========================================
   ENHANCED ACCESSIBILITY & CONTRAST
   ======================================== */

@layer utilities {
  /* High contrast mode support */
  @media (prefers-contrast: high) {
    :root {
      --background: 0 0% 100%;
      --foreground: 0 0% 0%;
      --border: 0 0% 50%;
      --muted-foreground: 0 0% 20%;
    }
    
    .dark {
      --background: 0 0% 0%;
      --foreground: 0 0% 100%;
      --border: 0 0% 60%;
      --muted-foreground: 0 0% 80%;
    }
  }
  
  /* Focus visible enhancements */
  .focus-visible-enhanced {
    @apply focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 focus-visible:ring-offset-background;
  }
  
  /* Enhanced text contrast utilities */
  .text-high-contrast {
    @apply text-foreground;
    color: hsl(var(--foreground));
  }
  
  .text-medium-contrast {
    @apply text-muted-foreground;
    color: hsl(var(--muted-foreground));
  }
  
  /* Enhanced background utilities for better visibility */
  .bg-enhanced-card {
    background-color: hsl(var(--card));
    border: 1px solid hsl(var(--border));
  }
  
  .bg-enhanced-muted {
    background-color: hsl(var(--muted));
  }
  
  /* Responsive text sizing for better accessibility */
  .text-responsive-sm {
    @apply text-sm sm:text-base;
  }
  
  .text-responsive-base {
    @apply text-base sm:text-lg;
  }
  
  .text-responsive-lg {
    @apply text-lg sm:text-xl;
  }
  
  .text-responsive-xl {
    @apply text-xl sm:text-2xl;
  }
  
  /* Enhanced shadow utilities that work in both modes */
  .shadow-enhanced {
    box-shadow: 
      0 1px 3px 0 rgba(0, 0, 0, 0.1),
      0 1px 2px 0 rgba(0, 0, 0, 0.06);
  }
  
  .dark .shadow-enhanced {
    box-shadow: 
      0 1px 3px 0 rgba(0, 0, 0, 0.3),
      0 1px 2px 0 rgba(0, 0, 0, 0.2);
  }
  
  .shadow-enhanced-lg {
    box-shadow: 
      0 10px 15px -3px rgba(0, 0, 0, 0.1),
      0 4px 6px -2px rgba(0, 0, 0, 0.05);
  }
  
  .dark .shadow-enhanced-lg {
    box-shadow: 
      0 10px 15px -3px rgba(0, 0, 0, 0.4),
      0 4px 6px -2px rgba(0, 0, 0, 0.2);
  }

  /* Native dialog enhancements */
  dialog {
    /* Ensure native dialog appears above everything */
    z-index: 9999;
  }
  
  dialog::backdrop {
    /* Fallback for browsers that don't support CSS custom properties in backdrop */
    background-color: rgba(0, 0, 0, 0.8);
    backdrop-filter: blur(4px);
  }
  
  /* Ensure dialog is centered when shown */
  dialog[open] {
    display: flex;
    align-items: center;
    justify-content: center;
  }

  /* ========================================
     MARKETING PAGE ANIMATIONS
     ======================================== */

  /* Blob animation for marketing background */
  @keyframes blob {
    0% {
      transform: translate(0px, 0px) scale(1);
    }
    33% {
      transform: translate(30px, -50px) scale(1.1);
    }
    66% {
      transform: translate(-20px, 20px) scale(0.9);
    }
    100% {
      transform: translate(0px, 0px) scale(1);
    }
  }

  .animate-blob {
    animation: blob 7s infinite;
  }

  .animation-delay-2000 {
    animation-delay: 2s;
  }

  .animation-delay-4000 {
    animation-delay: 4s;
  }
}
