<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Theme Switcher Test</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        .theme-test {
            padding: 20px;
            margin: 10px;
            border: 2px solid #ccc;
            border-radius: 8px;
        }
    </style>
</head>
<body class="bg-white dark:bg-gray-900 text-black dark:text-white transition-all duration-200">
    <div class="container mx-auto p-8">
        <h1 class="text-3xl font-bold mb-8">Theme Switcher Test</h1>
        
        <div class="theme-test bg-gray-100 dark:bg-gray-800">
            <h2 class="text-xl font-semibold mb-4">Current Theme Test</h2>
            <p class="mb-4">This page tests the theme switching functionality.</p>
            
            <div class="flex gap-4 mb-4">
                <button onclick="setTheme('light')" class="px-4 py-2 bg-blue-500 text-white rounded hover:bg-blue-600">
                    Light Theme
                </button>
                <button onclick="setTheme('dark')" class="px-4 py-2 bg-gray-700 text-white rounded hover:bg-gray-800">
                    Dark Theme
                </button>
                <button onclick="setTheme('system')" class="px-4 py-2 bg-green-500 text-white rounded hover:bg-green-600">
                    System Theme
                </button>
            </div>
            
            <div class="mb-4">
                <p><strong>Current Theme:</strong> <span id="current-theme">Loading...</span></p>
                <p><strong>System Preference:</strong> <span id="system-theme">Loading...</span></p>
                <p><strong>Applied Theme:</strong> <span id="applied-theme">Loading...</span></p>
            </div>
        </div>
        
        <div class="theme-test bg-yellow-100 dark:bg-yellow-900">
            <h3 class="text-lg font-medium mb-2">Color Test Elements</h3>
            <div class="grid grid-cols-1 md:grid-cols-3 gap-4">
                <div class="p-4 bg-white dark:bg-gray-700 rounded border">
                    <p>Background Element</p>
                </div>
                <div class="p-4 bg-blue-100 dark:bg-blue-900 rounded border">
                    <p class="text-blue-900 dark:text-blue-100">Colored Element</p>
                </div>
                <div class="p-4 bg-red-100 dark:bg-red-900 rounded border">
                    <p class="text-red-900 dark:text-red-100">Another Color</p>
                </div>
            </div>
        </div>
    </div>

    <script>
        function getSystemTheme() {
            return window.matchMedia('(prefers-color-scheme: dark)').matches ? 'dark' : 'light';
        }

        function applyTheme(theme) {
            const root = document.documentElement;
            if (theme === 'system') {
                const systemTheme = getSystemTheme();
                root.classList.toggle('dark', systemTheme === 'dark');
                return systemTheme;
            } else {
                root.classList.toggle('dark', theme === 'dark');
                return theme;
            }
        }

        function setTheme(theme) {
            localStorage.setItem('theme', theme);
            updateDisplay();
        }

        function updateDisplay() {
            const savedTheme = localStorage.getItem('theme') || 'system';
            const systemTheme = getSystemTheme();
            const appliedTheme = applyTheme(savedTheme);
            
            document.getElementById('current-theme').textContent = savedTheme;
            document.getElementById('system-theme').textContent = systemTheme;
            document.getElementById('applied-theme').textContent = appliedTheme;
        }

        // Initialize
        window.addEventListener('load', () => {
            updateDisplay();
            
            // Listen for system theme changes
            window.matchMedia('(prefers-color-scheme: dark)').addEventListener('change', () => {
                if (localStorage.getItem('theme') === 'system') {
                    updateDisplay();
                }
            });
        });
    </script>
</body>
</html>